<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="Controllers.StatisticsController"
      spacing="20"
      style="-fx-background-color: #F5F6F8; -fx-padding: 30;"
      stylesheets="@piechart-styles.css"
      VBox.vgrow="ALWAYS">

    <!-- En-tÃªte -->
    <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 0 0 20 0;">
        <VBox spacing="5" HBox.hgrow="ALWAYS">
            <Label text="ðŸ“Š Statistiques des Offres d'Emploi"
                   style="-fx-font-size: 28px; -fx-font-weight: 700; -fx-text-fill: #2c3e50;"/>
            <Label fx:id="roleInfoLabel"
                   text="Statistiques - Recruiter"
                   style="-fx-font-size: 14px; -fx-text-fill: #3498db; -fx-font-weight: 600;"/>
            <Label fx:id="totalOffersLabel"
                   text="Total des offres : 0"
                   style="-fx-font-size: 16px; -fx-text-fill: #6c757d;"/>
            <Label fx:id="expiredOffersLabel"
                   text="Offres expirÃ©es : 0"
                   style="-fx-font-size: 16px; -fx-text-fill: #e74c3c;"/>
        </VBox>

        <Button text="ðŸ”„ RafraÃ®chir"
                onAction="#handleRefresh"
                style="-fx-background-color: #5BA3F5; -fx-text-fill: white; -fx-font-size: 14px;
                       -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-weight: 600;"/>
    </HBox>

    <!-- Carte principale avec le PieChart -->
    <VBox style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 30;
                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 20, 0, 0, 5);"
          VBox.vgrow="ALWAYS">

        <!-- PieChart -->
        <PieChart fx:id="contractTypePieChart"
                  title="RÃ©partition des offres par type de contrat"
                  legendVisible="true"
                  labelsVisible="true"
                  animated="true"
                  VBox.vgrow="ALWAYS"
                  minHeight="400"
                  prefHeight="500"
                  style="-fx-font-size: 14px;">
        </PieChart>

        <!-- LÃ©gende des couleurs (optionnel) -->
        <HBox spacing="20" alignment="CENTER" style="-fx-padding: 20 0 0 0;">
            <Label text="ðŸ’¡ Astuce : Survolez les sections pour plus de dÃ©tails"
                   style="-fx-font-size: 13px; -fx-text-fill: #6c757d; -fx-font-style: italic;"/>
        </HBox>
    </VBox>

    <!-- Carte supplÃ©mentaire pour d'autres statistiques (optionnel) -->
    <HBox spacing="20" VBox.vgrow="NEVER">
        <!-- Carte 1 -->
        <VBox spacing="10"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 15, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <Label text="ðŸ“ˆ Tendance"
                   style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #2c3e50;"/>
            <Label text="Les offres CDI sont les plus demandÃ©es"
                   wrapText="true"
                   style="-fx-font-size: 13px; -fx-text-fill: #6c757d;"/>
        </VBox>

        <!-- Carte 2 -->
        <VBox spacing="10"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 15, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <Label text="ðŸŽ¯ Performance"
                   style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #2c3e50;"/>
            <Label text="DiversitÃ© des types de contrat proposÃ©s"
                   wrapText="true"
                   style="-fx-font-size: 13px; -fx-text-fill: #6c757d;"/>
        </VBox>

        <!-- Carte 3 -->
        <VBox spacing="10"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 15, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <Label text="ðŸ’¼ OpportunitÃ©s"
                   style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #2c3e50;"/>
            <Label text="Consulter toutes les offres disponibles"
                   wrapText="true"
                   style="-fx-font-size: 13px; -fx-text-fill: #6c757d;"/>
        </VBox>
    </HBox>

</VBox>


