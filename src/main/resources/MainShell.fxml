<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>

<BorderPane fx:id="rootPane"
            xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="Controllers.MainShellController"
            stylesheets="@styles.css"
            style="-fx-background-color: #EBF0F8;">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOP BAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="16" styleClass="top-bar">

            <!-- Logo -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <ImageView fitHeight="34" fitWidth="34" preserveRatio="true">
                    <image><Image url="@images/logo.jpg"/></image>
                </ImageView>
                <Label text="Talent Bridge" styleClass="logo-text"/>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Right actions -->
            <HBox alignment="CENTER_RIGHT" spacing="10">
                <Button fx:id="btnThemeToggle" text="ðŸŒ™"
                        onAction="#handleThemeToggle"
                        style="-fx-background-color:#F0F4FA; -fx-font-size:16px; -fx-cursor:hand; -fx-background-radius:22; -fx-min-width:40; -fx-min-height:40; -fx-border-color:#E4EBF5; -fx-border-width:1; -fx-border-radius:22;"/>
                <Button fx:id="btnNotifications" text="ðŸ””"
                        onAction="#handleNotifications"
                        style="-fx-background-color:transparent; -fx-font-size:18px; -fx-cursor:hand;"/>
                <Separator orientation="VERTICAL" style="-fx-padding:0 4;"/>
                <VBox alignment="CENTER_RIGHT" spacing="1">
                    <Label fx:id="lblUserName" text="" styleClass="user-name"/>
                    <Label fx:id="lblUserRole" text="" styleClass="user-role"/>
                </VBox>
                <Button fx:id="btnUserProfile" text="ðŸ‘¤"
                        styleClass="profile-button" onAction="#handleUserProfile"/>
                <Button fx:id="btnDisconnect" text="â»  DÃ©connexion"
                        styleClass="disconnect-button" onAction="#handleDisconnect"/>
            </HBox>
        </HBox>
    </top>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LEFT SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <left>
        <VBox prefWidth="230" spacing="0" styleClass="sidebar">

            <!-- User card inside sidebar -->
            <VBox alignment="CENTER" spacing="4"
                  style="-fx-padding: 20 16 14 16; -fx-background-color: linear-gradient(to bottom right,#5BA3F5,#4A90E2); -fx-background-radius: 0;">
                <Label fx:id="lblSidebarUserName" text=""
                       style="-fx-font-size:14px; -fx-font-weight:700; -fx-text-fill:white;"/>
                <Label fx:id="lblSidebarUserRole" text=""
                       style="-fx-font-size:11px; -fx-text-fill:rgba(255,255,255,0.8);"/>
            </VBox>

            <!-- Nav buttons -->
            <VBox spacing="2" style="-fx-padding: 14 10 10 10;">
                <Label text="NAVIGATION" styleClass="sidebar-section-label"/>

                <!-- Common -->
                <Button fx:id="btnApplications"   onAction="#handleApplicationsNav"
                        text="ðŸ“‹   Candidatures"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity">
                    <VBox.margin><Insets top="4"/></VBox.margin>
                </Button>
                <Button fx:id="btnJobOffers"       onAction="#handleJobOffersNav"
                        text="ðŸ¢   Offres d'emploi"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"/>
                <Button fx:id="btnInterviews"      onAction="#handleInterviewsNav"
                        text="ðŸ“…   Entretiens"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"/>
                <Button fx:id="btnEvents"          onAction="#handleEventsNav"
                        text="ðŸŽ¯   Ã‰vÃ©nements"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"/>
                <Button fx:id="btnPastEvents"      onAction="#handlePastEventsNav"
                        text="ðŸ“†   Ã‰vÃ©nements passÃ©s"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"
                        visible="false" managed="false"/>
                <Button fx:id="btnCalendar"        onAction="#handleCalendarNav"
                        text="ðŸ—“   Calendrier"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"/>
                <Button fx:id="btnStatistics"      onAction="#handleStatistics"
                        text="ðŸ“Š   Mes Statistiques"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"/>

                <!-- Admin only -->
                <Separator styleClass="sidebar-separator"
                           visible="false" managed="false" fx:id="adminSep">
                    <VBox.margin><Insets top="6" bottom="6"/></VBox.margin>
                </Separator>
                <Button fx:id="btnAdminStats"        onAction="#handleAdminStatsNav"
                        text="ðŸ“Š   Statistiques Globales"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"
                        visible="false" managed="false"/>
                <Button fx:id="btnAdminApplications" onAction="#handleAdminApplicationsNav"
                        text="ðŸ“‹   Gestion Candidatures"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"
                        visible="false" managed="false"/>
                <Button fx:id="btnDashboard"          onAction="#handleDashboardNav"
                        text="ðŸ›¡   Dashboard Admin"
                        styleClass="sidebar-nav-btn" maxWidth="Infinity"
                        visible="false" managed="false"/>
            </VBox>

            <Region VBox.vgrow="ALWAYS"/>

            <!-- Bottom -->
            <VBox spacing="6" style="-fx-padding: 10 10 18 10;">
                <Separator styleClass="sidebar-separator"/>
                <Button fx:id="btnFullscreenToggle" onAction="#handleFullscreenToggle"
                        text="â›¶   Plein Ã‰cran"
                        styleClass="sidebar-bottom-button" maxWidth="Infinity"/>
            </VBox>
        </VBox>
    </left>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONTENT AREA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <center>
        <StackPane fx:id="contentArea"
                   style="-fx-background-color: #EBF0F8; -fx-padding: 24;"/>
    </center>

</BorderPane>

